<!DOCTYPE html>
<html>
<head>
	<title></title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
	<div id="aa"></div>
<script>
	if (window.DeviceMotionEvent) {
    window.addEventListener('devicemotion', deviceMotionHandler, false);
} else {
    alert('抱歉，你的手机配置实在有些过不去，考虑换个新的再来试试吧');
}
let last_update = 0,
    last_x = 0,
    last_y = 0,
    SHAKE_THRESHOLD = 800,
    last_z = 0,
    x,y,z;
function deviceMotionHandler(eventData) {
    aa.innerHTML = '111';
    var acceleration = eventData.accelerationIncludingGravity;
    var curTime = new Date().getTime();
    if ((curTime - last_update) > 300) {
        var diffTime = curTime - last_update;
        last_update = curTime;
        x = acceleration.x;
        y = acceleration.y;
        z = acceleration.z;
        var speed = Math.abs(x + y + z - last_x - last_y - last_z) / diffTime * 10000;
        if (speed > SHAKE_THRESHOLD) {
            
            
            alert('摇到了')
            
        }
        last_x = x;
        last_y = y;
        last_z = z;
    }
}
</script>
</body>
</html>